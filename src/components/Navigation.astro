---
// Centered liquid glass navigation header
---

<nav id="site-nav" class="fixed top-8 left-0 right-0 z-50 transition-all duration-300">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-center items-center h-14 relative">
      <!-- Logo positioned absolutely on left -->
      <div class="absolute left-0 flex items-center">
        <a href="/" class="block">
          <img
            id="francisco-logo-light"
            src="/logo/Francisco-animated.svg"
            alt="Francisco"
            class="h-5 w-auto transition-all duration-300 dark:hidden"
          />
          <img
            id="francisco-logo-dark"
            src="/logo/Francisco-animated-white.svg"
            alt="Francisco"
            class="h-5 w-auto transition-all duration-300 hidden dark:block"
          />
        </a>
      </div>

      <!-- Centered Navigation Menu -->
      <div class="hidden md:block">
        <div class="bg-glass-white/60 dark:bg-dark-glass-white/60 backdrop-blur-lg rounded-glass px-6 py-2 flex items-center space-x-6 shadow-frost border border-glass-gray-200/10 dark:border-dark-glass-gray-200/10">
          <a href="/" class="text-glass-gray-700 dark:text-dark-glass-gray-700 hover:text-glass-primary dark:hover:text-dark-glass-primary text-sm font-medium transition-all duration-300">francisco</a>
          <a href="/case-studies" class="text-glass-gray-700 dark:text-dark-glass-gray-700 hover:text-glass-primary dark:hover:text-dark-glass-primary text-sm font-medium transition-all duration-300">case studies</a>
          <a href="/resources" class="text-glass-gray-700 dark:text-dark-glass-gray-700 hover:text-glass-primary dark:hover:text-dark-glass-primary text-sm font-medium transition-all duration-300">resources</a>
          <a href="/contact" class="text-glass-gray-700 dark:text-dark-glass-gray-700 hover:text-glass-primary dark:hover:text-dark-glass-primary text-sm font-medium transition-all duration-300">contact</a>
        </div>
      </div>

      <!-- Right Side positioned absolutely on right -->
      <div class="absolute right-0 flex items-center space-x-2">
        <!-- Theme Toggle - Desktop only -->
        <button onclick="toggleTheme()" class="hidden md:flex w-8 h-8 bg-glass-white/60 dark:bg-dark-glass-white/60 backdrop-blur-lg rounded-glass-sm items-center justify-center shadow-frost border border-glass-white/20 dark:border-dark-glass-white/20 text-glass-gray-600 dark:text-dark-glass-gray-600 hover:text-glass-primary dark:hover:text-dark-glass-primary transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-glass-primary/20 dark:focus:ring-dark-glass-primary/20">
          <!-- Sun icon (light mode) -->
          <svg id="sun-icon-desktop" class="w-4 h-4 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
          </svg>
          <!-- Moon icon (dark mode) -->
          <svg id="moon-icon-desktop" class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
          </svg>
        </button>
        
        <!-- CTA Button -->
        <a href="#contact" class="hidden md:inline-flex group relative bg-glass-primary dark:bg-dark-glass-primary text-glass-white dark:text-dark-glass-white px-6 py-3 rounded-glass text-sm font-medium transition-all duration-500 shadow-glass focus:outline-none focus:ring-2 focus:ring-glass-primary/20 dark:focus:ring-dark-glass-primary/20 overflow-hidden hover:shadow-xl hover:scale-105 hover:bg-white hover:text-glass-primary">
          <span class="relative z-10 transition-colors duration-500">Book an intro call</span>
          <div class="absolute inset-0 bg-white opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
        </a>

        <!-- Mobile CTA Icon -->
        <a
          href="/contact"
          class="md:hidden w-10 h-10 bg-glass-primary/90 dark:bg-dark-glass-primary/90 backdrop-blur-lg rounded-full flex items-center justify-center shadow-glass border border-glass-primary/40 dark:border-dark-glass-primary/40 text-glass-white dark:text-dark-glass-white transition-all duration-300 hover:bg-glass-primary hover:scale-105 focus:outline-none focus:ring-2 focus:ring-glass-primary/30"
          aria-label="Book an intro call"
        >
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5.5a2.5 2.5 0 012.5-2.5h2A2.5 2.5 0 0110 5.5V7a1 1 0 01-.293.707l-1.19 1.19a.5.5 0 00-.11.54 12.04 12.04 0 005.156 5.156.5.5 0 00.54-.11l1.19-1.19A1 1 0 0116 13h1.5a2.5 2.5 0 012.5 2.5v2A2.5 2.5 0 0117.5 20H16c-7.18 0-13-5.82-13-13V5.5z" />
          </svg>
        </a>

        <!-- Mobile menu button -->
        <div class="md:hidden">
          <button
            type="button"
            id="mobile-menu-button"
            aria-expanded="false"
            aria-controls="mobile-menu"
            aria-label="Toggle navigation menu"
            class="w-8 h-8 bg-glass-white/60 dark:bg-dark-glass-white/60 backdrop-blur-lg rounded-glass-sm flex items-center justify-center shadow-frost border border-glass-white/20 dark:border-dark-glass-white/20 text-glass-gray-600 dark:text-dark-glass-gray-600 hover:text-glass-primary dark:hover:text-dark-glass-primary transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-glass-primary/20 dark:focus:ring-dark-glass-primary/20"
          >
            <svg id="menu-icon" class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
            <svg id="close-icon" class="h-4 w-4 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div
    id="mobile-menu"
    class="hidden md:hidden fixed top-0 left-0 w-full h-full bg-glass-white/95 dark:bg-dark-glass-white/95 backdrop-blur-lg z-40"
    role="dialog"
    aria-modal="true"
    aria-labelledby="mobile-menu-title"
  >
    <div class="flex flex-col h-full pt-20 px-4">
      <h2 id="mobile-menu-title" class="sr-only">Navigation Menu</h2>

      <nav class="flex flex-col space-y-6" role="navigation">
        <a
          href="/"
          class="text-2xl font-medium text-glass-gray-700 dark:text-dark-glass-gray-700 hover:text-glass-primary dark:hover:text-dark-glass-primary transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-glass-primary/20 dark:focus:ring-dark-glass-primary/20 rounded p-2"
          onclick="closeMobileMenu()"
        >
          francisco
        </a>
        <a
          href="/case-studies"
          class="text-2xl font-medium text-glass-gray-700 dark:text-dark-glass-gray-700 hover:text-glass-primary dark:hover:text-dark-glass-primary transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-glass-primary/20 dark:focus:ring-dark-glass-primary/20 rounded p-2"
          onclick="closeMobileMenu()"
        >
          case studies
        </a>
        <a
          href="/resources"
          class="text-2xl font-medium text-glass-gray-700 dark:text-dark-glass-gray-700 hover:text-glass-primary dark:hover:text-dark-glass-primary transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-glass-primary/20 dark:focus:ring-dark-glass-primary/20 rounded p-2"
          onclick="closeMobileMenu()"
        >
          resources
        </a>
        <a
          href="/contact"
          class="text-2xl font-medium text-glass-gray-700 dark:text-dark-glass-gray-700 hover:text-glass-primary dark:hover:text-dark-glass-primary transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-glass-primary/20 dark:focus:ring-dark-glass-primary/20 rounded p-2"
          onclick="closeMobileMenu()"
        >
          contact
        </a>
      </nav>

      <div class="mt-8">
        <a
          href="/contact"
          class="inline-block bg-glass-primary dark:bg-dark-glass-primary text-glass-white dark:text-dark-glass-white px-6 py-3 rounded-glass text-lg font-medium transition-all duration-300 shadow-glass focus:outline-none focus:ring-2 focus:ring-glass-primary/20 dark:focus:ring-dark-glass-primary/20"
          onclick="closeMobileMenu()"
        >
          Book an intro call
        </a>
      </div>
    </div>
  </div>
</nav>

<!-- Mobile Theme Toggle - Fixed Bottom Right -->
<button
  id="mobile-theme-toggle"
  onclick="toggleTheme()"
  class="md:hidden fixed bottom-6 right-6 z-50 w-12 h-12 bg-glass-white/80 dark:bg-dark-glass-white/80 backdrop-blur-lg rounded-full flex items-center justify-center shadow-glass border border-glass-white/20 dark:border-dark-glass-white/20 text-glass-gray-600 dark:text-dark-glass-gray-600 hover:text-glass-primary dark:hover:text-dark-glass-primary transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-glass-primary/20 dark:focus:ring-dark-glass-primary/20 hover:scale-105"
  aria-label="Toggle theme"
>
  <!-- Sun icon (light mode) -->
  <svg id="sun-icon-mobile" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
  </svg>
  <!-- Moon icon (dark mode) -->
  <svg id="moon-icon-mobile" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
  </svg>
</button>

<script>
  // Update theme icons when component loads
  document.addEventListener('DOMContentLoaded', function() {
    // Small delay to ensure the global script has run
    setTimeout(() => {
      if (window.updateThemeIcons) {
        window.updateThemeIcons();
      }
    }, 100);

    // Trigger logo animation on page load for both logos
    const logoLight = document.getElementById('francisco-logo-light');
    const logoDark = document.getElementById('francisco-logo-dark');

    // Function to restart animation for a logo
    const restartLogoAnimation = (logoElement) => {
      if (logoElement) {
        const newLogo = logoElement.cloneNode(true);
        logoElement.parentNode.replaceChild(newLogo, logoElement);
      }
    };

    // Add click handlers to both logos
    if (logoLight) {
      logoLight.addEventListener('click', () => restartLogoAnimation(logoLight));
    }
    if (logoDark) {
      logoDark.addEventListener('click', () => restartLogoAnimation(logoDark));
    }

    // Mobile menu functionality
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const menuIcon = document.getElementById('menu-icon');
    const closeIcon = document.getElementById('close-icon');
    const nav = document.getElementById('site-nav');
    const mobileThemeToggle = document.getElementById('mobile-theme-toggle');

    const updateNavPosition = () => {
      if (!nav) return;
      const isMobile = window.matchMedia('(max-width: 767px)').matches;
      if (isMobile && window.scrollY > 24) {
        nav.style.top = 'auto';
        nav.style.bottom = '1.5rem';
        nav.style.left = '0';
        nav.style.right = '0';
        nav.style.paddingLeft = '1rem';
        nav.style.paddingRight = '1rem';
        nav.classList.add('backdrop-blur-md');
        if (mobileThemeToggle) {
          mobileThemeToggle.style.bottom = '5.5rem';
        }
      } else {
        nav.style.top = '2rem';
        nav.style.bottom = '';
        nav.style.paddingLeft = '';
        nav.style.paddingRight = '';
        nav.classList.remove('backdrop-blur-md');
        if (mobileThemeToggle) {
          mobileThemeToggle.style.bottom = '1.5rem';
        }
      }

      if (!isMobile) {
        nav.style.top = '2rem';
        nav.style.bottom = '';
        nav.style.paddingLeft = '';
        nav.style.paddingRight = '';
        if (mobileThemeToggle) {
          mobileThemeToggle.style.bottom = '1.5rem';
        }
      }
    };

    updateNavPosition();
    window.addEventListener('scroll', updateNavPosition, { passive: true });
    window.addEventListener('resize', updateNavPosition);

    if (mobileMenuButton && mobileMenu) {
      mobileMenuButton.addEventListener('click', function() {
        const isOpen = !mobileMenu.classList.contains('hidden');

        if (isOpen) {
          closeMobileMenu();
        } else {
          openMobileMenu();
        }
      });
    }

    // Close mobile menu when clicking outside
    document.addEventListener('click', function(event) {
      if (mobileMenu && !mobileMenu.classList.contains('hidden')) {
        if (!mobileMenu.contains(event.target) && !mobileMenuButton.contains(event.target)) {
          closeMobileMenu();
        }
      }
    });

    // Close mobile menu on escape key
    document.addEventListener('keydown', function(event) {
      if (event.key === 'Escape' && mobileMenu && !mobileMenu.classList.contains('hidden')) {
        closeMobileMenu();
      }
    });
  });

  // Global mobile menu functions
  window.openMobileMenu = function() {
    const mobileMenu = document.getElementById('mobile-menu');
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const menuIcon = document.getElementById('menu-icon');
    const closeIcon = document.getElementById('close-icon');

    if (mobileMenu) {
      mobileMenu.classList.remove('hidden');
      document.body.style.overflow = 'hidden';

      if (mobileMenuButton) {
        mobileMenuButton.setAttribute('aria-expanded', 'true');
      }

      if (menuIcon && closeIcon) {
        menuIcon.classList.add('hidden');
        closeIcon.classList.remove('hidden');
      }
    }
  };

  window.closeMobileMenu = function() {
    const mobileMenu = document.getElementById('mobile-menu');
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const menuIcon = document.getElementById('menu-icon');
    const closeIcon = document.getElementById('close-icon');

    if (mobileMenu) {
      mobileMenu.classList.add('hidden');
      document.body.style.overflow = '';

      if (mobileMenuButton) {
        mobileMenuButton.setAttribute('aria-expanded', 'false');
      }

      if (menuIcon && closeIcon) {
        menuIcon.classList.remove('hidden');
        closeIcon.classList.add('hidden');
      }
    }
  };
</script>
