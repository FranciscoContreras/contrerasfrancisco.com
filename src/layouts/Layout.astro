---
export interface Props {
  title: string;
}

const { title } = Astro.props;

const siteUrl = 'https://contrerasfrancisco.com';
const metaDescription = 'Francisco Contreras - Product Marketing Manager specializing in AI, automation, and customer experience. High-energy marketing strategist with proven results in early-stage tech companies.';

const jsonLd = {
  '@context': 'https://schema.org',
  '@graph': [
    {
      '@type': 'WebSite',
      '@id': `${siteUrl}/#website`,
      url: siteUrl,
      name: 'Francisco Contreras',
      description: metaDescription,
      inLanguage: 'en-US',
      publisher: {
        '@id': `${siteUrl}/#organization`
      }
    },
    {
      '@type': 'WebPage',
      '@id': `${siteUrl}/#webpage`,
      url: siteUrl,
      name: title,
      isPartOf: {
        '@id': `${siteUrl}/#website`
      },
      description: metaDescription,
      primaryImageOfPage: {
        '@type': 'ImageObject',
        url: `${siteUrl}/logo/Francisco.svg`
      },
      breadcrumb: {
        '@id': `${siteUrl}/#breadcrumb`
      },
      inLanguage: 'en-US',
      mainEntity: {
        '@id': `${siteUrl}/#person`
      }
    },
    {
      '@type': 'BreadcrumbList',
      '@id': `${siteUrl}/#breadcrumb`,
      itemListElement: [
        {
          '@type': 'ListItem',
          position: 1,
          name: 'Home',
          item: siteUrl
        }
      ]
    },
    {
      '@type': 'Organization',
      '@id': `${siteUrl}/#organization`,
      name: 'Francisco Contreras Consulting',
      url: siteUrl,
      logo: {
        '@type': 'ImageObject',
        url: `${siteUrl}/logo/Francisco-animated.svg`,
        width: 156,
        height: 24
      },
      contactPoint: [
        {
          '@type': 'ContactPoint',
          email: 'mailto:contrerasfrancisco@icloud.com',
          contactType: 'customer support',
          areaServed: 'Global',
          availableLanguage: ['English', 'Spanish']
        }
      ],
      founder: {
        '@id': `${siteUrl}/#person`
      }
    },
    {
      '@type': 'Person',
      '@id': `${siteUrl}/#person`,
      name: 'Francisco Contreras',
      givenName: 'Francisco',
      familyName: 'Contreras',
      alternateName: 'Franc',
      jobTitle: 'Product Marketing Manager',
      description: metaDescription,
      url: siteUrl,
      email: 'mailto:contrerasfrancisco@icloud.com',
      image: `${siteUrl}/images/francisco-profile-1200.jpg`,
      sameAs: ['https://www.linkedin.com/in/contreras-francisco/'],
      worksFor: {
        '@id': `${siteUrl}/#organization`
      },
      knowsAbout: ['Product Marketing', 'AI', 'Automation', 'Customer Experience', 'SaaS', 'Growth Marketing'],
      knowsLanguage: ['English', 'Spanish'],
      brand: {
        '@id': `${siteUrl}/#organization`
      }
    },
    {
      '@type': 'Service',
      '@id': `${siteUrl}/#services`,
      name: 'Product Marketing & Automation Consulting',
      description: 'Strategic go-to-market planning, marketing workflow automation, customer journey optimization, and AI-driven growth experimentation for B2B software teams.',
      provider: {
        '@id': `${siteUrl}/#organization`
      },
      areaServed: 'Global',
      serviceType: ['Go-to-market strategy', 'Marketing automation', 'Customer journey optimization', 'Product marketing consulting'],
      offers: {
        '@type': 'Offer',
        price: '0',
        priceCurrency: 'USD',
        availability: 'https://schema.org/InStock'
      }
    }
  ]
};
---

<!DOCTYPE html>
<html lang="en" class="scroll-smooth bg-glass-bg dark:bg-dark-glass-bg">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={metaDescription} />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="index, follow" />
    <meta name="author" content="Francisco Contreras" />
    <meta name="theme-color" content="#6366f1" />
    <meta name="theme-color" content="#4338ca" media="(prefers-color-scheme: dark)" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://contrerasfrancisco.com/" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={metaDescription} />
    <meta property="og:image" content="https://contrerasfrancisco.com/logo/Francisco.svg" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://contrerasfrancisco.com/" />
    <meta property="twitter:title" content={title} />
    <meta property="twitter:description" content={metaDescription} />
    <meta property="twitter:image" content="https://contrerasfrancisco.com/logo/Francisco.svg" />

    <!-- Structured Data -->
    <script type="application/ld+json">{JSON.stringify(jsonLd, null, 2)}</script>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap" rel="stylesheet"></noscript>
    <title>{title}</title>
    <style>
      /* Force exact background color for dark mode */
      html.dark,
      html.dark body,
      html.dark main {
        background-color: #050712 !important;
        background-image: none !important;
      }
      .dark .bg-dark-glass-bg {
        background-color: #050712 !important;
      }
      /* Force case study cards to use correct color */
      .dark .bg-dark-glass-card {
        background-color: #0d122b !important;
      }

      /* Performance optimizations */
      * {
        box-sizing: border-box;
      }

      /* Reduce motion for users who prefer it */
      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
          scroll-behavior: auto !important;
        }
      }

      /* Improve font rendering */
      html {
        text-rendering: optimizeLegibility;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      /* Optimize focus indicators */
      :focus {
        outline: 2px solid #6366f1;
        outline-offset: 2px;
      }

      /* Improve image loading */
      img {
        height: auto;
        max-width: 100%;
      }

      /* Screen reader only class */
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }

      .focus\\:not-sr-only:focus {
        position: static;
        width: auto;
        height: auto;
        padding: inherit;
        margin: inherit;
        overflow: visible;
        clip: auto;
        white-space: normal;
      }
    </style>
  </head>
  <body class="font-sans antialiased bg-glass-bg dark:bg-dark-glass-bg text-glass-gray-900 dark:text-dark-glass-gray-900 transition-colors duration-300">
    <!-- Skip to main content link for accessibility -->
    <a
      href="#main-content"
      class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-glass-primary text-glass-white px-4 py-2 rounded-glass z-50 focus:outline-none focus:ring-2 focus:ring-glass-primary/20"
    >
      Skip to main content
    </a>

    <slot />

    <script>
      // Theme toggle functionality - optimize for performance
      (function() {
        // Apply theme immediately to prevent flash
        const currentTheme = localStorage.getItem('theme') || 'light';
        if (currentTheme === 'dark') {
          document.documentElement.classList.add('dark');
        }
      })();

      document.addEventListener('DOMContentLoaded', function() {
        // Initialize theme after DOM load
        const currentTheme = localStorage.getItem('theme') || 'light';
        if (currentTheme === 'dark') {
          document.documentElement.classList.add('dark');
        } else {
          document.documentElement.classList.remove('dark');
        }
      });

      // Global theme toggle function
      window.toggleTheme = function() {
        const isDark = document.documentElement.classList.contains('dark');

        if (isDark) {
          // Switch to light mode
          document.documentElement.classList.remove('dark');
          localStorage.setItem('theme', 'light');
        } else {
          // Switch to dark mode
          document.documentElement.classList.add('dark');
          localStorage.setItem('theme', 'dark');
        }

        // Update icon visibility
        updateThemeIcons();
      };

      // Update theme icons for both desktop and mobile
      window.updateThemeIcons = function() {
        const isDark = document.documentElement.classList.contains('dark');

        // Desktop icons
        const sunIconDesktop = document.getElementById('sun-icon-desktop');
        const moonIconDesktop = document.getElementById('moon-icon-desktop');

        // Mobile icons
        const sunIconMobile = document.getElementById('sun-icon-mobile');
        const moonIconMobile = document.getElementById('moon-icon-mobile');

        // Update desktop icons
        if (sunIconDesktop && moonIconDesktop) {
          if (isDark) {
            sunIconDesktop.classList.remove('hidden');
            moonIconDesktop.classList.add('hidden');
          } else {
            sunIconDesktop.classList.add('hidden');
            moonIconDesktop.classList.remove('hidden');
          }
        }

        // Update mobile icons
        if (sunIconMobile && moonIconMobile) {
          if (isDark) {
            sunIconMobile.classList.remove('hidden');
            moonIconMobile.classList.add('hidden');
          } else {
            sunIconMobile.classList.add('hidden');
            moonIconMobile.classList.remove('hidden');
          }
        }
      };

    </script>
  </body>
</html>
